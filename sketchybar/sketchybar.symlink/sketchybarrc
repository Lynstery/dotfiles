# A simple sketchybar config for aerospace users to get started with
# Not too different from the base starting config!

PLUGIN_DIR="$CONFIG_DIR/plugins"
ITEM_DIR="$CONFIG_DIR/items"


##### Colors #####

BLACK=0xff181926
WHITE=0xffcad3f5
RED=0xffed8796
GREEN=0xffa6da95
BLUE=0xff8aadf4
YELLOW=0xffeed49f
ORANGE=0xfff5a97f
MAGENTA=0xffc6a0f6
GREY=0xff939ab7
TRANSPARENT=0x00000000
BAR_COLOR=0xff24273a
ICON_COLOR=$WHITE
LABEL_COLOR=$WHITE
POPUP_BACKGROUND_COLOR=$BLACK
POPUP_BORDER_COLOR=$WHITE
SHADOW_COLOR=$BLACK
PADDINGS=3

source "$CONFIG_DIR/colors.sh"

bar=(
  height=30
  color=$BAR_COLOR
  shadow=on
  position=top
  sticky=on
  padding_right=15
  padding_left=15
  corner_radius=9
  y_offset=3
  margin=5
  blur_radius=20
)

default=(
  updates=on
  icon.font="Hack Nerd Font:Bold:14.0"
  icon.color=$ICON_COLOR
  icon.padding_left=$PADDINGS
  icon.padding_right=$PADDINGS
  label.font="SF Pro:bold:13.0"
  label.color=$LABEL_COLOR
  label.padding_left=$PADDINGS
  label.padding_right=$PADDINGS
  background.padding_right=$PADDINGS
  background.padding_left=$PADDINGS
  popup.background.border_width=2
  popup.background.corner_radius=11
  popup.background.border_color=$POPUP_BORDER_COLOR
  popup.background.color=$POPUP_BACKGROUND_COLOR
  popup.background.shadow.drawing=on
)

sketchybar --bar "${bar[@]}"
sketchybar --default "${default[@]}"

# Add the aerospace_workspace_change event we specified in aerospace.toml
sketchybar --add event aerospace_workspace_change
sketchybar --add event aerospace_mode_change

# aerospace
source "$ITEM_DIR/spaces.sh"

#front app
source "$ITEM_DIR/front_app.sh"


sketchybar --add item clock right \
  --set clock update_freq=10 script="$PLUGIN_DIR/clock.sh" \
  --add item battery right \
  --set battery update_freq=120 script="$PLUGIN_DIR/battery.sh" \
  --subscribe battery system_woke power_source_change \
  --add item volume right \
  --set volume script="$PLUGIN_DIR/volume.sh" \
  --subscribe volume volume_change \
  --add item input right \
  --set input script="$PLUGIN_DIR/input_source.sh" \
  --add event input_source_change "AppleSelectedInputSourcesChangedNotification" \
  --subscribe input input_source_change

##### Force all scripts to run the first time (never do this in a script) #####
sketchybar --update
